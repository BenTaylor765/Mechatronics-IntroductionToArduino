
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../Ex4DriveServoMotor/">
      
      
        <link rel="next" href="../Ex6EncodeMotor/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.4">
    
    
      
        <title>DC Motor - Introduction to Arduino Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.8608ea7d.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/styles.css">
    
      <link rel="stylesheet" href="../../css/highlights.css">
    
      <link rel="stylesheet" href="../../css/tablesAndFigures.css">
    
      <link rel="stylesheet" href="https://unpkg.com/katex@0/dist/katex.min.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="deep-orange">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#introduction" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Introduction to Arduino Documentation" class="md-header__button md-logo" aria-label="Introduction to Arduino Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Introduction to Arduino Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              DC Motor
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="deep-orange"  aria-label="Dark Mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Dark Mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="green" data-md-color-accent="deep-purple"  aria-label="Light Mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Light Mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Introduction to Arduino Documentation" class="md-nav__button md-logo" aria-label="Introduction to Arduino Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Introduction to Arduino Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction to this Activity
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Disclaimer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Laptop / MacBook Disclaimer
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../RobotBuild/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Building the Robot
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../IntroMaterial/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Introductory and Supplementary Material
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Introductory and Supplementary Material
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../IntroMaterial/SupplSignPost/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Supplementary Signposting Document to Accompany the introductory Exercises
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../IntroMaterial/IntroExercises/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Started - Introductory Exercises (Non-assessed)
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Basic Exercises
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Basic Exercises
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Ex1ledPattern/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LED Pattern
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Ex2PotCalibration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Calibration of Potentiometer Angle
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Ex3IrSensor/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    IR Sensor Measurement and Graph
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Ex4DriveServoMotor/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Driving a Servo Motor
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    DC Motor
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    DC Motor
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Introduction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pwm-control-for-the-dc-motor" class="md-nav__link">
    <span class="md-ellipsis">
      PWM Control for the DC Motor
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#code-example-control-led-intensity-example" class="md-nav__link">
    <span class="md-ellipsis">
      Code Example: Control LED Intensity Example
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-the-tb6612fng-breakout-board" class="md-nav__link">
    <span class="md-ellipsis">
      Using the TB6612FNG breakout board
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Using the TB6612FNG breakout board">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#online-documentation-from-the-manufacturer-and-other-sites" class="md-nav__link">
    <span class="md-ellipsis">
      Online Documentation from the manufacturer and other sites
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#h-bridge-circuit-and-example-code" class="md-nav__link">
    <span class="md-ellipsis">
      H-Bridge Circuit and Example Code
    </span>
  </a>
  
    <nav class="md-nav" aria-label="H-Bridge Circuit and Example Code">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#operation-of-the-tb6612fng-driver-board-circuit" class="md-nav__link">
    <span class="md-ellipsis">
      Operation of the TB6612FNG Driver Board Circuit
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sample-code-for-the-tb6612fng-driver-board" class="md-nav__link">
    <span class="md-ellipsis">
      Sample Code for the TB6612FNG Driver Board
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#assessed-exercise" class="md-nav__link">
    <span class="md-ellipsis">
      Assessed Exercise
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Ex6EncodeMotor/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Encoders + Motor
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../AdvancedExercises/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Advanced Exercises
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6" id="__nav_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Advanced Exercises
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../AdvancedExercises/Ex7PiIrDist/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PI Control – IR Sensor Distance
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../AdvancedExercises/Ex8PiEncoder/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PI Control – Encoder Position
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../AdvancedExercises/Ex9PiIrSequence/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PI Control – IR with Sequence
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Assessment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Assessment
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Introduction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pwm-control-for-the-dc-motor" class="md-nav__link">
    <span class="md-ellipsis">
      PWM Control for the DC Motor
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#code-example-control-led-intensity-example" class="md-nav__link">
    <span class="md-ellipsis">
      Code Example: Control LED Intensity Example
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-the-tb6612fng-breakout-board" class="md-nav__link">
    <span class="md-ellipsis">
      Using the TB6612FNG breakout board
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Using the TB6612FNG breakout board">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#online-documentation-from-the-manufacturer-and-other-sites" class="md-nav__link">
    <span class="md-ellipsis">
      Online Documentation from the manufacturer and other sites
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#h-bridge-circuit-and-example-code" class="md-nav__link">
    <span class="md-ellipsis">
      H-Bridge Circuit and Example Code
    </span>
  </a>
  
    <nav class="md-nav" aria-label="H-Bridge Circuit and Example Code">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#operation-of-the-tb6612fng-driver-board-circuit" class="md-nav__link">
    <span class="md-ellipsis">
      Operation of the TB6612FNG Driver Board Circuit
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sample-code-for-the-tb6612fng-driver-board" class="md-nav__link">
    <span class="md-ellipsis">
      Sample Code for the TB6612FNG Driver Board
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#assessed-exercise" class="md-nav__link">
    <span class="md-ellipsis">
      Assessed Exercise
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



  <h1>DC Motor</h1>

<div class="admonition info">
<p class="admonition-title"><abbr title="Graduate Teaching Assistant">GTA</abbr> Marking</p>
<p>This is an assessed Exercise. When you have completed the <a href="#dcMotorExercise">Assessed Exercise</a>, you should show your work to a <abbr title="Graduate Teaching Assistant">GTA</abbr> to get marked.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Before starting these exercises, you should ensure that you have completed the circuit on the robot chassis, as suggested on <debugHL><a href="../../RobotBuild/#dcMotorPic">Building the Robot: Fig. 13</a></debugHL>. Furthermore, you should ensure that all the connections described in the <debugHL><a href="../../RobotBuild/#dcMotor">Building the Robot: Circuit Layout for the DC Motor Exercise</a></debugHL> are correct.</p>
</div>
<p>The following video is a quick demonstration of the final outcome from this exercise:</p>
<figure>
<div style="text-align: center;">
<iframe id="kaltura_player" src='https://cdnapisec.kaltura.com/p/2103181/embedPlaykitJs/uiconf_id/53345422?iframeembed=true&amp;entry_id=1_a3eviyhm&amp;config%5Bprovider%5D=%7B%22widgetId%22%3A%221_4q6vxp1v%22%7D&amp;config%5Bplayback%5D=%7B%22startTime%22%3A0%7D'  style="width: 400px;height: 285px;border: 0;justify-content:center;" allowfullscreen webkitallowfullscreen mozAllowFullScreen allow="autoplay *; fullscreen *; encrypted-media *" sandbox="allow-downloads allow-forms allow-same-origin allow-scripts allow-top-navigation allow-pointer-lock allow-popups allow-modals allow-orientation-lock allow-popups-to-escape-sandbox allow-presentation allow-top-navigation-by-user-activation" title="Placeholder - Quick Test Video"></iframe>
</div>
<figcaption>Video demonstrating the expected outcome from this exercise</figcaption>
</figure>

<h2 id="introduction">Introduction</h2>
<p>The aim of this exercise is to control a DC motor from an Arduino, using a DC motor driver interface. You will be using a <abbr title="Pulse Width Modulation">PWM</abbr> signal to drive the motor.</p>
<h3 id="pwm-control-for-the-dc-motor"><abbr title="Pulse Width Modulation">PWM</abbr> Control for the DC Motor</h3>
<p><abbr title="Pulse Width Modulation">PWM</abbr> is a way of encoding information into a rectangular pulse train. Generally, the period, (and hence the frequency), of the pulse train is maintained constant, and the width of the rectangular pulses are varied – we will assume this definition for the remainder of these laboratory sessions. 
<debugHL><a href="#pwmAverage">Fig 1</a></debugHL> illustrated the time domain waveform of the <abbr title="Pulse Width Modulation">PWM</abbr> signal, where the digital waveform has a rising edge at t=t<sub>0</sub>, and a falling edge at t=t<sub>2</sub>. The on-state of the <abbr title="Pulse Width Modulation">PWM</abbr> signal is defined as t<sub>on</sub>, the off-state of the signal is defined as t<sub>off</sub>, and the <abbr title="Pulse Width Modulation">PWM</abbr> period is defined as T<sub>s</sub>.</p>
<figure>
  <a name="pwmAverage"></a>
  <a class="glightbox" href="../../Images/PWM%20Average.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Pulse Width Modulation, (left) time domain waveforms, (rich) average voltage of PWM signal." src="../../Images/PWM%20Average.png" /></a>
  <figcaption>Pulse Width Modulation, (left) time domain waveforms, (rich) average voltage of <abbr title="Pulse Width Modulation">PWM</abbr> signal.</figcaption>
</figure>
<p><abbr title="Pulse Width Modulation">PWM</abbr> can be used in a number of different ways; the most common being to ‘chop’ a DC voltage to reduce its average value, as illustrated graphically in Figure 13. The input voltage, V<sub>in</sub> is ‘chopped’, using a converter circuit, into pulses, as shown in Figure 13 (left), where the time integral of the on-state of the waveform is <debugHL>t<sub>on</sub> x V<sub>in</sub>, </debugHL>and has a graphical area of A. The filtering effect of the system we are driving will effectively spread the area under the pulse across in, <debugHL><a href="#pwmAverage">Fig 1 (left)</a></debugHL> </debugHL>, across the switching period, Ts, as illustrated in <debugHL><a href="#pwmAverage">Fig 1 (right)</a></debugHL>. </p>
<p>This can be expressed as an integral equation:</p>
<p><a name="eqn1"></a>
$$
V_{ave} = \frac{1}{T} \int_{t_0}^{t_2} V_{in} dt = \frac{t_{on}} {T_{s}}V_{in}
$$</p>
<p>Where: V<sub>in</sub> is the supply voltage, and V<sub>ave</sub> is the average value of the waveform.</p>
<p>This method of operation is used in most electrical power converters to control the power supply to downstream system, such as a motor.
Another way in which <abbr title="Pulse Width Modulation">PWM</abbr> can be used, is to encode some information as a function of the on-state time, t<sub>on</sub>, whilst maintaining a constant switching period, T<sub>s</sub>. The <abbr title="Pulse Width Modulation">PWM</abbr> signal is then decoded by the downstream system and a decision is made on its value.</p>
<p>During the laboratory exercises, you will be driving two different types of actuators:</p>
<ol>
<li>A DC motor - to control the speed of rotation, you will need to control the <abbr title="Pulse Width Modulation">PWM</abbr> to regulator the average voltage being fed to the DC motor. To interface the motor to the Arduino, you will need to use a motor drive circuit, to supply the current requirements of the motor.</li>
<li>A standard servomotor - this servomotor will move between 0 and 180 degrees and the angle can be controlled through a 5V pulse signal between 1-2ms and an embedded potentiometer</li>
</ol>
<p>The DC motor is different from the standard servomotor, in terms of the type of control. For servomotors, the average value of the <abbr title="Pulse Width Modulation">PWM</abbr> signal is not being used to regulate the average supply voltage to the device, like it is for DC motors, but instead, the <abbr title="Pulse Width Modulation">PWM</abbr> on-time is bounded between 2 values, (1ms and 2ms in this case), and is an encoded signal relating to a rotational position demand parameter for the servomotor, closed loop, controller.</p>
<h3 id="code-example-control-led-intensity-example">Code Example: Control <abbr title="Light Emitting Diode">LED</abbr> Intensity Example</h3>
<p>In this example, we will use the <code>analogWrite()</code> function to generate a <abbr title="Pulse Width Modulation">PWM</abbr> signal, which we will use to vary the voltage supplied to an <abbr title="Light Emitting Diode">LED</abbr>, and hence the <abbr title="Light Emitting Diode">LED</abbr> intensity.</p>
<p>A <abbr title="Pulse Width Modulation">PWM</abbr> signal can be generated by the <code>analogWrite()</code> function. The value passed to the <code>analogWrite()</code> function can be between 0 and 255, which results in a <abbr title="Pulse Width Modulation">PWM</abbr> output between 0% and 100% duty cycle, as illustrated in <debugHL><a href="#analoWritePWM">Fig 2</a></debugHL>. </p>
<figure>
  <a name="analoWritePWM"></a>
  <a class="glightbox" href="../../Images/Pwm_5steps.gif" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Illustration of the use of analogWrite() function, and the resulting PWM output." src="../../Images/Pwm_5steps.gif" /></a>
  <figcaption>. Illustration of the use of analogWrite() function, and the resulting <abbr title="Pulse Width Modulation">PWM</abbr> output.</figcaption>
</figure>
<p>(<debugHL><a href="#analoWritePWM">Fig 2</a></debugHL> is taken from: <a href = "https://commonpwmAverages.wikimedia.org/wiki/File:Pwm_5steps.gif">https://commonpwmAverages.wikimedia.org/wiki/File:Pwm_5steps.gif</a>)</p>
<p>The Arduino language reference page for the analogWrite command can be found at:
<a href = "https://www.arduino.cc/reference/en/language/functions/analog-io/analogwrite/">https://www.arduino.cc/reference/en/language/functions/analog-io/analogwrite/</a>.</p>
<p><strong>Procedure:</strong></p>
<ol>
<li>
<p>The circuit requirement for this exercise is the <a href="../../RobotBuild/#circuit-layout-for-the-led-pattern-and-calibration-of-potentiometer-angle-exercises"><abbr title="Light Emitting Diode">LED</abbr> Pattern circuit</a>, so you should have already built thin onto the robot chassis.</p>
</li>
<li>
<p>Use the following example code to run this exercise:</p>
</li>
</ol>
<p><div class="language-Arduino highlight"><span class="filename">LED Fade.ino Example</span><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="c1">//This sketch is the Control LED Intensity Example from the Introduction to</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="c1">// Arduino – PWM control of Actuators laboratory worksheet</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="c1">// define a macro for the LED pin number </span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="cp">#define LEDpin 11</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="c1">// -------------------------------------</span>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="c1">// Setup function</span>
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="kr">void</span><span class="w"> </span><span class="nb">setup</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="w">  </span><span class="c1">// define the pin mode for the LED pin</span>
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="w">  </span><span class="nf">pinMode</span><span class="p">(</span><span class="n">LEDpin</span><span class="p">,</span><span class="w"> </span><span class="kr">OUTPUT</span><span class="p">);</span>
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="p">}</span>
</span><span id="__span-0-14"><a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="c1">// -------------------------------------</span>
</span><span id="__span-0-15"><a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="c1">// Lop Function</span>
</span><span id="__span-0-16"><a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="kr">void</span><span class="w"> </span><span class="nb">loop</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-17"><a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a>
</span><span id="__span-0-18"><a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a><span class="w">  </span><span class="c1">// Increment a variable, i, from 0 and 255</span>
</span><span id="__span-0-19"><a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kr">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">256</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
</span><span id="__span-0-20"><a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a><span class="w">  </span><span class="p">{</span>
</span><span id="__span-0-21"><a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a><span class="w">    </span><span class="c1">// modify the PWM signal, by passing the variable, i, to the </span>
</span><span id="__span-0-22"><a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a><span class="w">    </span><span class="c1">//analogWrite function</span>
</span><span id="__span-0-23"><a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a><span class="w">    </span><span class="nf">analogWrite</span><span class="p">(</span><span class="n">LEDpin</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="p">);</span>
</span><span id="__span-0-24"><a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a><span class="w">    </span><span class="c1">//delay the program by 10ms</span>
</span><span id="__span-0-25"><a id="__codelineno-0-25" name="__codelineno-0-25" href="#__codelineno-0-25"></a><span class="w">    </span><span class="nf">delay</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
</span><span id="__span-0-26"><a id="__codelineno-0-26" name="__codelineno-0-26" href="#__codelineno-0-26"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-0-27"><a id="__codelineno-0-27" name="__codelineno-0-27" href="#__codelineno-0-27"></a><span class="w">  </span><span class="c1">// Decrement a variable, i, from 255 to 0</span>
</span><span id="__span-0-28"><a id="__codelineno-0-28" name="__codelineno-0-28" href="#__codelineno-0-28"></a><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kr">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">255</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">--</span><span class="p">)</span>
</span><span id="__span-0-29"><a id="__codelineno-0-29" name="__codelineno-0-29" href="#__codelineno-0-29"></a><span class="w">  </span><span class="p">{</span>
</span><span id="__span-0-30"><a id="__codelineno-0-30" name="__codelineno-0-30" href="#__codelineno-0-30"></a><span class="w">    </span><span class="c1">// modify the PWM signal, by passing the variable, i, to the </span>
</span><span id="__span-0-31"><a id="__codelineno-0-31" name="__codelineno-0-31" href="#__codelineno-0-31"></a><span class="w">    </span><span class="c1">//analogWrite function</span>
</span><span id="__span-0-32"><a id="__codelineno-0-32" name="__codelineno-0-32" href="#__codelineno-0-32"></a><span class="w">    </span><span class="nf">analogWrite</span><span class="p">(</span><span class="n">LEDpin</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="p">);</span>
</span><span id="__span-0-33"><a id="__codelineno-0-33" name="__codelineno-0-33" href="#__codelineno-0-33"></a><span class="w">    </span><span class="c1">//delay the program by 10ms</span>
</span><span id="__span-0-34"><a id="__codelineno-0-34" name="__codelineno-0-34" href="#__codelineno-0-34"></a><span class="w">    </span><span class="nf">delay</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
</span><span id="__span-0-35"><a id="__codelineno-0-35" name="__codelineno-0-35" href="#__codelineno-0-35"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-0-36"><a id="__codelineno-0-36" name="__codelineno-0-36" href="#__codelineno-0-36"></a><span class="p">}</span>
</span></code></pre></div>
3. Run the program and observe the effects on the <abbr title="Light Emitting Diode">LED</abbr> of the different values being passed to the <code>analogWrite()</code> function.</p>
<h2 id="using-the-tb6612fng-breakout-board">Using the TB6612FNG breakout board</h2>
<p>A DC motor cannot be powered directly from the pins of the Arduino board, because the current drawn by the DC motor is too large and could damage the Arduino by overloading the output pins. To overcome this problem, a power electronic driver circuit is required to interface the motor to the Arduino microcontroller board. During this exercise, you will be using a TB6612FNG motor driver breakout board, as shown in <debugHL><a href="#TB6612FG">Fig 3</a></debugHL>, and an external power supply, to drive motor from control signals generated in the Arduino.</p>
<figure>
  <a name="TB6612FG"></a>
  <a class="glightbox" href="../../Images/TB6612FG.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Picture of the TB6612FG motor driver board, with pins labelled." src="../../Images/TB6612FG.jpg" /></a>
  <figcaption>Picture of the TB6612FG motor driver board, with pins labelled.</figcaption>
</figure>
<p>This section is aimed at providing you with some useful information, to help you get started with using the TB6612FNG breakout board. This section will not provide you with all the information you may need, so it will be up to you to research other sources of information to help. There are numerous online guides detailing the interfacing of this breakout board with an Arduino controller.</p>
<p>The TB6612FNG, from TOSHIBA, is a monolithic bridge driver IC, in other words, it is a single integrated circuit containing the power electronic switching and control interface circuitry required for implementing a bridge motor driver circuit. The TB6612FNG contains two independently controlled H-bridge drive circuits. See the data sheet, linked in the following section for more details.</p>
<p>In isolation, an integrated circuit can be difficult to interface with a control system, without a custom PCB design. The use of breakout board circuits provides a convenient way of connecting surface mount chips to breadboard prototyping circuit, and interfacing then with control processors, such as the Arduino devices we will be using. 
The TB6612FNG board, shown in <debugHL><a href="#TB6612FG">Fig 3</a></debugHL>, is a breakout board for the TB6612FNG IC, and is packaged with the required capacitors to correctly operate the device.
The pin descriptions for each pins on the TB6612FNG breakout board are described in <debugHL><a href="#pinsTB6612FG">Table 1</a></debugHL>:</p>
<table>
<a name="pinsTB6612FG"></a>
  <thead>
    <tr> <th>Pin label:</th> <th>Description:</th> </tr>
  </thead>
  <tbody>    
    <tr><td>Vm</td><td>Motor power circuit supply (2.5V to 13.5V)</td> </tr> 
    <tr><td>Vcc</td><td>Logic circuit supply (2.7V to 5.5V)</td> </tr> 
    <tr><td>GND</td><td>Ground</td> </tr> 
    <tr><td>Standby</td><td>Standby input (200kΩ pull-down internally) Low = Standby, High = Active</td> </tr> 
    <tr><td>AI1</td><td>Channel A input 1 (200kΩ pull-down internally)</td> </tr> 
    <tr><td>AI2</td><td>Channel A input 2 (200kΩ pull-down internally)</td> </tr> 
    <tr><td>PWMA</td><td>Channel A PWM input  (200kΩ pull-down at internal)</td> </tr> 
    <tr><td>AO1</td><td>Channel A Output 1</td> </tr> 
    <tr><td>AO2</td><td>Channel A Output 2</td> </tr> 
    <tr><td>BI1</td><td>Channel B input 1 (200kΩ pull-down internally)</td> </tr> 
    <tr><td>BI2</td><td>Channel B input 2 (200kΩ pull-down internally)</td> </tr> 
    <tr><td>PWMB</td><td>Channel B PWM input  (200kΩ pull-down at internal)</td> </tr> 
    <tr><td>BO1</td><td>Channel B Output 1</td> </tr> 
    <tr><td>BO2</td><td>Channel B Output 2</td> </tr> 
  </tbody>
  <caption>Pin descriptions for the TB6612FNG breakout board.</caption>
</table>

<h3 id="online-documentation-from-the-manufacturer-and-other-sites">Online Documentation from the manufacturer and other sites</h3>
<p>Semiconductor manufacturers often provide information for the use of their manufactured devices in the form of a data sheet, and often provide application notes and other material for more complicated classes of device. Links to some relevant manufacturer’s documentation and some other relevant application documents are provided:</p>
<ul>
<li>TB6612FNG Data sheet (TOSHIBA): <debugHL><a href="https://toshiba.semicon-storage.com/info/docget.jsp?did=10660&amp;prodName=TB6612FNG" target="_blank">TB6612FNG Data sheet</a></debugHL>.</li>
<li>Data Sheet for the breakout board (Sparkfun): <debugHL><a href="https://media.digikey.com/pdf/Data Sheets/Sparkfun PDFs/ROB-14450_Web.pdf" target="_blank">SparkFun Motor Driver - Dual</a></debugHL>.</li>
<li>Application note (ST Microelectronics): <debugHL><a href="https://www.st.com/resource/en/application_note/cd00003776-applications-of-monolithic-bridge-drivers-stmicroelectronics.pdf" target="_blank">Applications of Monolithic Bridge Driver</a></debugHL>.</li>
<li>Presentation/Training Material (ST Microelectronics): <debugHL><a href="https://www.st.com/resource/en/application_presentation/introduction_to_electric_motors_pres.pdf" target="_blank">An Introduction to Electric Motors</a></debugHL>.</li>
</ul>
<h2 id="h-bridge-circuit-and-example-code">H-Bridge Circuit and Example Code</h2>
<p>The TB6612FNG IC is configured to operate as two independent H-bridge circuits, we will only discuss the operation of a single H-bright Circuit, using channel B. The outputs for channel B are BO1 and BO2, and this is controlled using the PWMB signal. The direction of rotation can be configured using the BI1 and BI2 inputs. The operation of an H-bridge circuit is covered in the lecture material for this course, so will not be discussed in detail in this document.</p>
<p>Before proceeding, ensure that you have constructed the H-bridge circuit in <debugHL><a href="../../RobotBuild/#dcMotor">Circuit Layout for the DC Motor Exercise</a></debugHL>.</p>
<h3 id="operation-of-the-tb6612fng-driver-board-circuit">Operation of the TB6612FNG Driver Board Circuit</h3>
<p>Each H-bridge circuit is configured using two control inputs, In1 and In2, with a separate <abbr title="Pulse Width Modulation">PWM</abbr> input for each bridge. The control operation of the H-bridge is described in <debugHL><a href="#ServoMotorConnect">Table 2</a></debugHL>.</p>
<table>
  <a name="ServoMotorConnect"></a>
  <thead>
    <tr> <th colspan="4">Input:</th> <th colspan="3">Output:</th></tr>
  </thead>
  <tbody>
    <tr><td>In1</td><td>In 2</td><td>PWM</td><td>STBY</td><td>Out1</td><td>Out2</td><td>Mode</td></tr>
    <tr><td>High</td><td>High</td><td>High/Low</td><td>High</td><td>Low</td><td>Low</td><td>Brake</td></tr>
    <tr><td rowspan="2">Low</td><td rowspan="2">High</td><td>High</td><td>High</td><td>Low</td><td>High</td><td>Forward (Drive)</td></tr>
    <tr><td>Low</td><td>High</td><td>Low</td><td>Low</td><td>Forward (Freewheel)</td></tr>
    <tr><td rowspan="2">High</td><td rowspan="2">Low</td><td>High</td><td>High</td><td>High</td><td>Low</td><td>Backward(Drive)</td></tr>
    <tr><td>Low</td><td>High</td><td>Low</td><td>Low</td><td>Backward(Freewheel)</td></tr>
    <tr><td>Low</td><td>Low</td><td>High</td><td>High</td><td colspan = "2">OFF (High Impedance)</td><td>Stop (Coast)</td></tr>
    <tr><td>High/Low</td><td>High/Low</td><td>High/Low</td><td>Low</td><td colspan = "2">OFF (High Impedance)</td><td>Standby</td></tr>
    </tbody>
  <caption>Control operation of the H-bridge.</caption>
</table>

<p>In essence, <debugHL><a href="#">Table 2</a></debugHL> indicates that the direction of the motor is configured using the In1 and In2 inputs, (BI1 and BI2, respectively for channel B), and the speed of the motor is controlled with the <abbr title="Pulse Width Modulation">PWM</abbr> input, (PWMB for channel B). The standby input is provided to set the driver board into a power sleep state.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The wiring polarity of the motor power, will define if forward is clockwise or anticlockwise rotation. If the connection of the motor is reversed on Out1 and Out2, then the motor will spin in the opposite direction.</p>
</div>
<p>Example code is provided, below, to demonstrate simple operation of this motor. The <code>analogWrite()</code> function is used to generate the <abbr title="Pulse Width Modulation">PWM</abbr> value for the <abbr title="Pulse Width Modulation">PWM</abbr> output, in the following manner:</p>
<ul>
<li>0% duty cycle, (always Low): <code>analogWrite([PWM pin number], 0)</code></li>
<li>100% duty cycle, (always High): <code>analogWrite([PWM pin number], 255)</code></li>
<li>Duty cycle between 0% and 100% be generated by writing values of between 1 and 254 to the <code>analogWrite()</code> function.</li>
</ul>
<p>The Arduino language reference page for the <code>analogWrite()</code> function can be found at:
<a href="https://www.arduino.cc/reference/tr/language/functions/analog-io/analogwrite/" target="target">https://www.arduino.cc/reference/tr/language/functions/analog-io/analogwrite/</a></p>
<h3 id="sample-code-for-the-tb6612fng-driver-board">Sample Code for the TB6612FNG Driver Board</h3>
<div class="language-Arduino highlight"><span class="filename">Sample Code for the TB6612FNG Driver Board</span><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="c1">// TB6612FNG Driver Board Sample board</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="c1">//</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="c1">// Author: Ben Taylor</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="c1">// University of Sheffield</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="c1">// Date: September 2024</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="c1">//</span>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="kr">const</span><span class="w"> </span><span class="kr">int</span><span class="w"> </span><span class="n">pinBI1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">7</span><span class="p">;</span><span class="w">       </span><span class="c1">// Pin allocation for BI1</span>
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="kr">const</span><span class="w"> </span><span class="kr">int</span><span class="w"> </span><span class="n">pinBI2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">8</span><span class="p">;</span><span class="w">       </span><span class="c1">// Pin allocation for BI2</span>
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="kr">const</span><span class="w"> </span><span class="kr">int</span><span class="w"> </span><span class="n">pinPWM</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span><span class="w">       </span><span class="c1">// Pin allocation for the PWMB pin</span>
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>
</span><span id="__span-1-12"><a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="kr">boolean</span><span class="w"> </span><span class="n">BI1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w">            </span><span class="c1">// BI1 pin value</span>
</span><span id="__span-1-13"><a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a><span class="kr">boolean</span><span class="w"> </span><span class="n">BI2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w">            </span><span class="c1">// BI2 pin value</span>
</span><span id="__span-1-14"><a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a><span class="kr">boolean</span><span class="w"> </span><span class="n">standBy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w">        </span><span class="c1">// standBy pin Value</span>
</span><span id="__span-1-15"><a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a>
</span><span id="__span-1-16"><a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a><span class="kr">boolean</span><span class="w"> </span><span class="n">rotDirect</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w">      </span><span class="c1">// Rotation direction variable</span>
</span><span id="__span-1-17"><a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a><span class="kr">unsigned</span><span class="w"> </span><span class="kr">char</span><span class="w"> </span><span class="n">pwmValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="c1">// PWM value to be written to the output</span>
</span><span id="__span-1-18"><a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a>
</span><span id="__span-1-19"><a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a><span class="kr">void</span><span class="w"> </span><span class="nb">setup</span><span class="p">()</span>
</span><span id="__span-1-20"><a id="__codelineno-1-20" name="__codelineno-1-20" href="#__codelineno-1-20"></a><span class="p">{</span>
</span><span id="__span-1-21"><a id="__codelineno-1-21" name="__codelineno-1-21" href="#__codelineno-1-21"></a><span class="w">  </span><span class="c1">// Assign the digital I/O pin directions</span>
</span><span id="__span-1-22"><a id="__codelineno-1-22" name="__codelineno-1-22" href="#__codelineno-1-22"></a><span class="w">  </span><span class="nf">pinMode</span><span class="p">(</span><span class="n">pinBI1</span><span class="p">,</span><span class="w"> </span><span class="kr">OUTPUT</span><span class="p">);</span>
</span><span id="__span-1-23"><a id="__codelineno-1-23" name="__codelineno-1-23" href="#__codelineno-1-23"></a><span class="w">  </span><span class="nf">pinMode</span><span class="p">(</span><span class="n">pinBI2</span><span class="p">,</span><span class="w"> </span><span class="kr">OUTPUT</span><span class="p">);</span>
</span><span id="__span-1-24"><a id="__codelineno-1-24" name="__codelineno-1-24" href="#__codelineno-1-24"></a><span class="w">  </span><span class="nf">pinMode</span><span class="p">(</span><span class="n">pinPWM</span><span class="p">,</span><span class="w"> </span><span class="kr">OUTPUT</span><span class="p">);</span>
</span><span id="__span-1-25"><a id="__codelineno-1-25" name="__codelineno-1-25" href="#__codelineno-1-25"></a>
</span><span id="__span-1-26"><a id="__codelineno-1-26" name="__codelineno-1-26" href="#__codelineno-1-26"></a>
</span><span id="__span-1-27"><a id="__codelineno-1-27" name="__codelineno-1-27" href="#__codelineno-1-27"></a><span class="w">  </span><span class="c1">//Initialize the serial port</span>
</span><span id="__span-1-28"><a id="__codelineno-1-28" name="__codelineno-1-28" href="#__codelineno-1-28"></a><span class="w">  </span><span class="nf">Serial</span><span class="p">.</span><span class="nf">begin</span><span class="p">(</span><span class="mi">9600</span><span class="p">);</span>
</span><span id="__span-1-29"><a id="__codelineno-1-29" name="__codelineno-1-29" href="#__codelineno-1-29"></a>
</span><span id="__span-1-30"><a id="__codelineno-1-30" name="__codelineno-1-30" href="#__codelineno-1-30"></a><span class="w">  </span><span class="c1">// Set Initial values for BI1 and BI2 control function pins</span>
</span><span id="__span-1-31"><a id="__codelineno-1-31" name="__codelineno-1-31" href="#__codelineno-1-31"></a><span class="w">  </span><span class="n">BI1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
</span><span id="__span-1-32"><a id="__codelineno-1-32" name="__codelineno-1-32" href="#__codelineno-1-32"></a><span class="w">  </span><span class="n">BI2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-1-33"><a id="__codelineno-1-33" name="__codelineno-1-33" href="#__codelineno-1-33"></a>
</span><span id="__span-1-34"><a id="__codelineno-1-34" name="__codelineno-1-34" href="#__codelineno-1-34"></a><span class="w">  </span><span class="c1">// set an initial value for the PWM value</span>
</span><span id="__span-1-35"><a id="__codelineno-1-35" name="__codelineno-1-35" href="#__codelineno-1-35"></a><span class="w">  </span><span class="n">pwmValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">200</span><span class="p">;</span>
</span><span id="__span-1-36"><a id="__codelineno-1-36" name="__codelineno-1-36" href="#__codelineno-1-36"></a><span class="p">}</span>
</span><span id="__span-1-37"><a id="__codelineno-1-37" name="__codelineno-1-37" href="#__codelineno-1-37"></a>
</span><span id="__span-1-38"><a id="__codelineno-1-38" name="__codelineno-1-38" href="#__codelineno-1-38"></a><span class="kr">void</span><span class="w"> </span><span class="nb">loop</span><span class="p">()</span>
</span><span id="__span-1-39"><a id="__codelineno-1-39" name="__codelineno-1-39" href="#__codelineno-1-39"></a><span class="p">{</span>
</span><span id="__span-1-40"><a id="__codelineno-1-40" name="__codelineno-1-40" href="#__codelineno-1-40"></a><span class="w">  </span><span class="c1">// Write the BI1 and BI2 values to the configuration pins</span>
</span><span id="__span-1-41"><a id="__codelineno-1-41" name="__codelineno-1-41" href="#__codelineno-1-41"></a><span class="w">  </span><span class="nf">digitalWrite</span><span class="p">(</span><span class="n">pinBI1</span><span class="p">,</span><span class="w"> </span><span class="n">BI1</span><span class="p">);</span>
</span><span id="__span-1-42"><a id="__codelineno-1-42" name="__codelineno-1-42" href="#__codelineno-1-42"></a><span class="w">  </span><span class="nf">digitalWrite</span><span class="p">(</span><span class="n">pinBI2</span><span class="p">,</span><span class="w"> </span><span class="n">BI2</span><span class="p">);</span>
</span><span id="__span-1-43"><a id="__codelineno-1-43" name="__codelineno-1-43" href="#__codelineno-1-43"></a>
</span><span id="__span-1-44"><a id="__codelineno-1-44" name="__codelineno-1-44" href="#__codelineno-1-44"></a><span class="w">  </span><span class="c1">// Write the pwnValue to the PWM pin</span>
</span><span id="__span-1-45"><a id="__codelineno-1-45" name="__codelineno-1-45" href="#__codelineno-1-45"></a><span class="w">  </span><span class="nf">analogWrite</span><span class="p">(</span><span class="n">pinPWM</span><span class="p">,</span><span class="w"> </span><span class="n">pwmValue</span><span class="p">);</span>
</span><span id="__span-1-46"><a id="__codelineno-1-46" name="__codelineno-1-46" href="#__codelineno-1-46"></a>
</span><span id="__span-1-47"><a id="__codelineno-1-47" name="__codelineno-1-47" href="#__codelineno-1-47"></a><span class="w">  </span><span class="c1">// Display the board variable status to the Serial Monitor</span>
</span><span id="__span-1-48"><a id="__codelineno-1-48" name="__codelineno-1-48" href="#__codelineno-1-48"></a><span class="w">  </span><span class="nf">Serial</span><span class="p">.</span><span class="nf">print</span><span class="p">(</span><span class="s">&quot;PWM output value = &quot;</span><span class="p">);</span>
</span><span id="__span-1-49"><a id="__codelineno-1-49" name="__codelineno-1-49" href="#__codelineno-1-49"></a><span class="w">  </span><span class="nf">Serial</span><span class="p">.</span><span class="nf">print</span><span class="p">(</span><span class="n">pwmValue</span><span class="p">);</span>
</span><span id="__span-1-50"><a id="__codelineno-1-50" name="__codelineno-1-50" href="#__codelineno-1-50"></a><span class="w">  </span><span class="nf">Serial</span><span class="p">.</span><span class="nf">print</span><span class="p">(</span><span class="s">&quot;, Standby = &quot;</span><span class="p">);</span>
</span><span id="__span-1-51"><a id="__codelineno-1-51" name="__codelineno-1-51" href="#__codelineno-1-51"></a><span class="w">  </span><span class="nf">Serial</span><span class="p">.</span><span class="nf">print</span><span class="p">(</span><span class="n">standBy</span><span class="p">);</span>
</span><span id="__span-1-52"><a id="__codelineno-1-52" name="__codelineno-1-52" href="#__codelineno-1-52"></a><span class="w">  </span><span class="nf">Serial</span><span class="p">.</span><span class="nf">print</span><span class="p">(</span><span class="s">&quot;, BI1 = &quot;</span><span class="p">);</span>
</span><span id="__span-1-53"><a id="__codelineno-1-53" name="__codelineno-1-53" href="#__codelineno-1-53"></a><span class="w">  </span><span class="nf">Serial</span><span class="p">.</span><span class="nf">print</span><span class="p">(</span><span class="n">BI1</span><span class="p">);</span>
</span><span id="__span-1-54"><a id="__codelineno-1-54" name="__codelineno-1-54" href="#__codelineno-1-54"></a><span class="w">  </span><span class="nf">Serial</span><span class="p">.</span><span class="nf">print</span><span class="p">(</span><span class="s">&quot;, BI2 = &quot;</span><span class="p">);</span>
</span><span id="__span-1-55"><a id="__codelineno-1-55" name="__codelineno-1-55" href="#__codelineno-1-55"></a><span class="w">  </span><span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="n">BI2</span><span class="p">);</span>
</span><span id="__span-1-56"><a id="__codelineno-1-56" name="__codelineno-1-56" href="#__codelineno-1-56"></a>
</span><span id="__span-1-57"><a id="__codelineno-1-57" name="__codelineno-1-57" href="#__codelineno-1-57"></a><span class="w">  </span><span class="c1">// wait 250ms</span>
</span><span id="__span-1-58"><a id="__codelineno-1-58" name="__codelineno-1-58" href="#__codelineno-1-58"></a><span class="w">  </span><span class="nf">delay</span><span class="p">(</span><span class="mi">250</span><span class="p">);</span>
</span><span id="__span-1-59"><a id="__codelineno-1-59" name="__codelineno-1-59" href="#__codelineno-1-59"></a><span class="p">}</span>
</span></code></pre></div>
<p><a name="dcMotorExercise"></a></p>
<h2 id="assessed-exercise">Assessed Exercise</h2>
<p>During this exercise, you will modify the example code </p>
<p><strong>Procedure:</strong></p>
<ul>
<li>Copy and Paste the Sample Code for the TB6612FNG Driver Board into a new Arduino sketch.</li>
<li>
<p>Read the code, and inline comments. Run the code, and observe its operation.</p>
</li>
<li>
<p>Write a program that can control the speed of the DC motor using a potentiometer input. </p>
<ul>
<li>The motor should rotate at maximum speed in a clockwise direction, when viewed from the shaft end, when the potentiometer is rotated to the extreme clockwise position.</li>
<li>The motor should rotate at maximum speed in an anticlockwise direction, when viewed from the shaft end, when the potentiometer is rotated to the extreme anticlockwise position.</li>
<li>When the potentiometer is in the centre position the motor shaft should be at zero speed, (stopped)</li>
<li>The speed of the motor should vary in a linear fashion between maximum speed, when the potentiometer is at its extreme rotation, and zero speed when the potentiometer is in the centre position.</li>
<li>You should display the following values on the serial monitor terminal, (with a similar text description to the sample code, above):<ol>
<li><abbr title="Analogue to Digital Converter">ADC</abbr> measurement value for the Potentiometer input</li>
<li><abbr title="Pulse Width Modulation">PWM</abbr> value, written to the analogWrite command</li>
<li>Boolean values for AI1, AI2 and Standby</li>
</ol>
</li>
</ul>
</li>
</ul>
<p><strong>What do we expect to see in the demonstration?</strong></p>
<ul>
<li>Demonstrate that you have fulfilled the requirements of the exercise with your working system.</li>
<li>The mapping of the potentiometer to shaft speed is consistent with the description above.</li>
<li>An external power supply is used to power the motor circuit, (Vm on the driver board).</li>
<li><abbr title="Analogue to Digital Converter">ADC</abbr> measurement from the potentiometer, <abbr title="Pulse Width Modulation">PWM</abbr> value and control logic Boolean values are clearly labelled and displayed on the serial monitor.</li>
<li>The serial monitor should update at a reasonable rate – 2 to 4 times a second.</li>
</ul>
<div class="admonition success">
<p class="admonition-title">Now Get Your Work Marked by a <abbr title="Graduate Teaching Assistant">GTA</abbr></p>
<p>Once you have completed your code and are satisfied with its operation, you should show your work to a <abbr title="Graduate Teaching Assistant">GTA</abbr> for marking.</p>
</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.tooltips", "content.code.copy", "content.code.select", "content.code.annotate", "navigation.indexes"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.f1b6f286.min.js"></script>
      
        <script src="../../javascripts/katex.js"></script>
      
        <script src="https://unpkg.com/katex@0/dist/katex.min.js"></script>
      
        <script src="https://unpkg.com/katex@0/dist/contrib/auto-render.min.js"></script>
      
    
  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>